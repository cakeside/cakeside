load 'deploy' if respond_to?(:namespace) # cap2 differentiator
require 'bundler/capistrano'                 # loads RVM's capistrano plugin
#load 'deploy/assets'
Dir['vendor/gems/*/recipes/*.rb','vendor/plugins/*/recipes/*.rb'].each { |plugin| load(plugin) }
load 'config/deploy' # remove this line to skip loading any of the default tasks

task :search_libs, :roles => :web do
  run "ls -x1 /usr/lib | grep -i xml"
end

task :count_libs, :roles => :web do
  run "ls -x1 /usr/lib | wc -l"
end

task :show_free_space, :roles => :web do
  run "df -h /"
end


task :stop_sphinx , :roles => :app do
  run "cd #{current_path} && rake thinking_sphinx:stop RAILS_ENV=production"
end

task :start_sphinx, :roles => :app do
  run "cd #{current_path} && rake thinking_sphinx:configure RAILS_ENV=production && rake thinking_sphinx:start RAILS_ENV=production"
end

task :index_sphinx, :roles => :app do
  run "cd #{current_path} && rake thinking_sphinx:index RAILS_ENV=production"
end

task :restart_sphinx, :roles => :app do
  stop_sphinx
  start_sphinx
end  
