<% provide(:title, "#{@tag}") -%>
<% content_for :javascript do -%>
<script type="text/javascript">  
  var ready = function(){ 
    var container = $('#creations-div');
    container.imagesLoaded(function(){
      container.masonry({ itemSelector : '.span4', isResizable: true });
    });
  };
  $(document).ready(ready);
  $(document).on('page:load', ready);
</script>
<% end -%>
<div class="row">
  <div class="span9">
    <h1><%= @total_creations %> creations tagged <em><%= @tag %></em></h1>
  </div>
  <div class="span3">
    <p class="pull-right"><%= link_to "#{@total_tutorials} tutorials", tutorial_tag_path(@tag) %> &raquo;</p>
  </div>
</div>
<div id="creations-div" class="row">
  <div class="span12">
    <ul class="thumbnails">
    <% @creations.each do |creation| %>
      <div class="span4">
        <div class="thumbnail">
          <%= link_to creation do %>
            <%= image_tag creation.primary_image.image.large.url %>
          <% end %>
          <div class="caption">
            <h3><%= link_to creation.name, creation %> <em><small>by <%= link_to shrink(creation.user.name, 20), profile_path(creation.user) %></small></em></h3>
            <p>
            <% creation.tags.each do |tag| -%>
              <%= link_to creation_tag_path(tag.name) do %>
                <span class="label"><%= tag.name %></span>
              <% end %>
            <% end -%>
            </p>
            <p><%= creation.story %></p>
          </div>
        </div>
      </div>
    <% end %>
    </ul>
  </div>
</div>
<div class="row">
  <div class="span12 text-center"> <%= paginate @creations %> </div>
</div>
