language: ruby
rvm:
  - 2.2.0
cache: bundler
addons:
  postgresql: '9.3'
  codeclimate: 
    repo_token:
      secure: "KsLxeZiHnIpMhHvIvDEjKjiTTXwRa40qg+4boACuz+9nP861pACOfNVHSSSXx0GiZPg9c+WrENYeQj2yHq7jxSQT7LbG1jD8HCC+wYpvrIAYw4GLwAIuPtXqvSQlvNxJtKFgIBXqrU/LKqCdBXN2kde9mkLiKCDrNr1KmMOqGLY="
sudo: false
before_script:
  - cp config/database.yml.travis config/database.yml
  - cp .env.example .env
  - psql -c 'create database cakeside_test;' -U postgres
script: 
  - bundle exec rake db:schema:load
  - bundle exec rake db:test:prepare
  - bundle exec rake spec
  - bundle exec rake teaspoon
